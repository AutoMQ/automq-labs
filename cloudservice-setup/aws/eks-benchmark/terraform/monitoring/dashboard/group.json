{"__inputs":[{"name":"prometheus","label":"prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"},{"name":"DS_EXPRESSION","label":"Expression","description":"","type":"datasource","pluginId":"__expr__"}],"__elements":{},"__requires":[{"type":"datasource","id":"__expr__","version":"1.0.0"},{"type":"grafana","id":"grafana","name":"Grafana","version":"11.2.0"},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[],"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":14,"w":12,"x":0,"y":0},"id":5,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum by(consumer_group, topic) (max by(consumer_group, topic, partition) (rate(kafka_group_commit_offset{job=\"$cluster_id\", consumer_group=~\"$group_id\", topic=~\"$topic\", partition=~\"$partition\"}[$__rate_interval])))","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{consumer_group}}#{{topic}}","range":true,"refId":"A","useBackend":false}],"title":"Consumer Throughput","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byFrameRefID","options":"C"},"properties":[{"id":"displayName","value":"${__field.labels.consumer_group}#${__field.labels.topic}"}]}]},"gridPos":{"h":14,"w":12,"x":12,"y":0},"id":1,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum by(consumer_group, topic) (max by(consumer_group, topic, partition) (kafka_group_commit_offset{job=\"$cluster_id\", consumer_group=~\"$group_id\", topic=~\"$topic\", partition=~\"$partition\"}))","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"{{consumer_group}}#{{topic}}","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum by(topic) (max by(topic, partition) (kafka_log_end_offset{job=\"$cluster_id\", topic=~\"$topic\", partition=~\"$partition\"}))","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"{{topic}}","range":true,"refId":"B","useBackend":false},{"datasource":{"type":"__expr__","uid":"${DS_EXPRESSION}"},"expression":"$B - $A","hide":false,"refId":"C","type":"math"}],"title":"Consumer Lag","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"mps"},"overrides":[]},"gridPos":{"h":14,"w":12,"x":0,"y":14},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum by(consumer_group, topic, partition) (rate(kafka_group_commit_offset{job=\"$cluster_id\", consumer_group=~\"$group_id\", topic=~\"$topic\", partition=~\"$partition\"}[$__rate_interval]))","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{consumer_group}}#{{topic}}-{{partition}}","range":true,"refId":"A","useBackend":false}],"title":"Consumer Throughput By Partition","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byFrameRefID","options":"C"},"properties":[{"id":"displayName","value":"${__field.labels.consumer_group}#${__field.labels.topic}-${__field.labels.partition}"}]}]},"gridPos":{"h":14,"w":12,"x":12,"y":14},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(consumer_group, topic, partition) (kafka_group_commit_offset{job=\"$cluster_id\", consumer_group=~\"$group_id\", topic=~\"$topic\", partition=~\"$partition\"})","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"{{consumer_group}}#{{topic}}-{{partition}}","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(topic, partition) (kafka_log_end_offset{job=\"$cluster_id\", topic=~\"$topic\", partition=~\"$partition\"})","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"{{topic}}-{{partition}}","range":true,"refId":"B","useBackend":false},{"datasource":{"type":"__expr__","uid":"${DS_EXPRESSION}"},"expression":"$B - $A","hide":false,"refId":"C","type":"math"}],"title":"Consumer Lag By Partition","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byFrameRefID","options":"C"},"properties":[{"id":"displayName","value":"${__field.labels.consumer_group}#${__field.labels.topic}-${__field.labels.partition}"}]}]},"gridPos":{"h":14,"w":12,"x":0,"y":28},"id":3,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(consumer_group, topic, partition) (kafka_group_commit_offset{job=\"$cluster_id\", consumer_group=~\"$group_id\", topic=~\"$topic\", partition=~\"$partition\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{consumer_group}}#{{topic}}-{{partition}}","range":true,"refId":"A","useBackend":false}],"title":"Consumer Commit Offsets","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"min":0,"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byFrameRefID","options":"C"},"properties":[{"id":"displayName","value":"${__field.labels.consumer_group}#${__field.labels.topic}-${__field.labels.partition}"}]}]},"gridPos":{"h":14,"w":12,"x":12,"y":28},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(topic, partition) (kafka_log_end_offset{job=\"$cluster_id\", topic=~\"$topic\", partition=~\"$partition\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"{{topic}}-{{partition}}","range":true,"refId":"B","useBackend":false}],"title":"Log End Offset","type":"timeseries"}],"refresh":"1m","schemaVersion":39,"tags":[],"templating":{"list":[{"current":{},"includeAll":false,"label":"Data Source","name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_server_connection_count{instance_id=~\"$cmp_instance_id\", env_id=~\"$cmp_env_id\"},job)","includeAll":false,"label":"Cluster Id","name":"cluster_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_server_connection_count{instance_id=~\"$cmp_instance_id\", env_id=~\"$cmp_env_id\"},job)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"","type":"query"},{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_group_commit_offset{topic=~\"$topic\", job=\"$cluster_id\"},consumer_group)","includeAll":true,"label":"Consumer Group","multi":true,"name":"group_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_group_commit_offset{topic=~\"$topic\", job=\"$cluster_id\"},consumer_group)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"},{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_group_commit_offset{job=\"$cluster_id\"},topic)","includeAll":true,"label":"Topic","multi":true,"name":"topic","options":[],"query":{"qryType":1,"query":"label_values(kafka_group_commit_offset{job=\"$cluster_id\"},topic)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","type":"query"},{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_group_commit_offset{topic=~\"$topic\", job=\"$cluster_id\"},partition)","includeAll":true,"label":"Partition","multi":true,"name":"partition","options":[],"query":{"qryType":1,"query":"label_values(kafka_group_commit_offset{topic=~\"$topic\", job=\"$cluster_id\"},partition)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"","sort":3,"type":"query"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_broker_active_count,env_id)","includeAll":true,"label":"CMP Env Id","name":"cmp_env_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_broker_active_count,env_id)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_broker_active_count{env_id=~\"$cmp_env_id\"},instance_id)","includeAll":true,"label":"CMP Instance Id","name":"cmp_instance_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_broker_active_count{env_id=~\"$cmp_env_id\"},instance_id)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"","title":"Group Metrics","uid":"d90be32f-7d32-488a-b99c-3e21529790e4","version":7,"weekStart":""}