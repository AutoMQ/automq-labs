{"__inputs":[{"name":"prometheus","label":"prometheus","description":"","type":"datasource","pluginId":"prometheus","pluginName":"Prometheus"},{"name":"DS_EXPRESSION","label":"Expression","description":"","type":"datasource","pluginId":"__expr__"}],"__elements":{},"__requires":[{"type":"datasource","id":"__expr__","version":"1.0.0"},{"type":"panel","id":"barchart","name":"Bar chart","version":""},{"type":"panel","id":"bargauge","name":"Bar gauge","version":""},{"type":"grafana","id":"grafana","name":"Grafana","version":"11.2.0"},{"type":"datasource","id":"prometheus","name":"Prometheus","version":"1.0.0"},{"type":"panel","id":"stat","name":"Stat","version":""},{"type":"panel","id":"table","name":"Table","version":""},{"type":"panel","id":"timeseries","name":"Time series","version":""}],"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[],"panels":[{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":0}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":0,"y":0},"id":1,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"value_and_name","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum by(job) (kafka_controller_active_count{job=\"$cluster_id\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Active Controller","range":true,"refId":"A","useBackend":false}],"type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":3,"y":0},"id":3,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"value_and_name","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"kafka_broker_fenced_count{job=\"$cluster_id\", instance=\"$active_controller\"}","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Fenced Broker","range":true,"refId":"A","useBackend":false}],"type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-blue","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":4,"x":6,"y":0},"id":6,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"value_and_name","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"kafka_topic_count{job=\"$cluster_id\", instance=\"$active_controller\"}","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Topics","range":true,"refId":"A","useBackend":false}],"type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":3,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":0.1}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":10,"y":0},"id":13,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_request_error_count_total{job=\"$cluster_id\", error!=\"NONE\"}[$__rate_interval]))","fullMetaSearch":false,"hide":true,"includeNullMetadata":false,"instant":false,"legendFormat":"__auto","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_request_count_total{job=\"$cluster_id\"}[$__rate_interval]))","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"__auto","range":true,"refId":"B","useBackend":false},{"datasource":{"type":"__expr__","uid":"${DS_EXPRESSION}"},"expression":"$A / $B","hide":false,"refId":"C","type":"math"}],"title":"Error Ratio (Percent)","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":true,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":30,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"binBps"},"overrides":[{"matcher":{"id":"byName","options":"In"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Out"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Out"},"properties":[]}]},"gridPos":{"h":12,"w":11,"x":13,"y":0},"id":5,"interval":"60s","options":{"legend":{"calcs":["max","min"],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_broker_network_io_bytes_total{job=\"$cluster_id\", direction=\"in\"}[$__rate_interval]))","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"In","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_broker_network_io_bytes_total{job=\"$cluster_id\", direction=\"out\"}[$__rate_interval])) * -1","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Out","range":true,"refId":"B","useBackend":false}],"title":"Bytes In (+) / Out (-)","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":64,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":1,"scaleDistribution":{"type":"linear"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":6,"w":6,"x":0,"y":6},"id":16,"interval":"120s","options":{"barRadius":0,"barWidth":0.54,"fullHighlight":false,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"orientation":"auto","showValue":"never","stacking":"none","tooltip":{"mode":"multi","sort":"desc"},"xTickLabelRotation":0,"xTickLabelSpacing":100},"pluginVersion":"11.2.0","targets":[{"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"max by(job) (kafka_broker_active_count{job=\"$cluster_id\"})","fullMetaSearch":false,"includeNullMetadata":true,"legendFormat":"{{label_name}}","range":true,"refId":"A","useBackend":false,"datasource":{"type":"prometheus","uid":"prometheus"}}],"title":"Broker Active Count","type":"barchart"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-blue","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":6,"w":4,"x":6,"y":6},"id":4,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"value_and_name","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"kafka_partition_total_count{job=\"$cluster_id\", instance=\"$active_controller\"}","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Partitions","range":true,"refId":"A","useBackend":false}],"type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"semi-dark-green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":6,"w":3,"x":10,"y":6},"id":7,"options":{"colorMode":"background","graphMode":"none","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(max by(topic, partition) (kafka_log_size{job=\"$cluster_id\"}))","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Size","range":true,"refId":"A","useBackend":false}],"transparent":true,"type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-YlBl"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":12,"w":6,"x":0,"y":12},"id":11,"options":{"displayMode":"gradient","maxVizHeight":300,"minVizHeight":10,"minVizWidth":0,"namePlacement":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"sizing":"auto","valueMode":"color"},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_count{job=\"$cluster_id\"})","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"total","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_stable_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"stable","range":true,"refId":"D","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_dead_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"dead","range":true,"refId":"B","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_empty_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"empty","range":true,"refId":"C","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_preparing_rebalance_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"prepare_rebalance","range":true,"refId":"E","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(kafka_group_completing_rebalance_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"completing_rebalance","range":true,"refId":"F","useBackend":false}],"title":"Group Count","type":"bargauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"percentunit"},"overrides":[{"matcher":{"id":"byName","options":"D 0okXDODKTMOSjDl3o_D9zA"},"properties":[{"id":"displayName","value":"Util"}]}]},"gridPos":{"h":12,"w":7,"x":6,"y":12},"id":15,"options":{"legend":{"calcs":["max"],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(job) (rate(jvm_cpu_time_seconds_total{job=\"$cluster_id\"}[$__rate_interval]))","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"__auto","range":true,"refId":"B","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"max by(job) (jvm_cpu_count{job=\"$cluster_id\"})","fullMetaSearch":false,"hide":true,"includeNullMetadata":true,"instant":false,"legendFormat":"__auto","range":true,"refId":"C","useBackend":false},{"datasource":{"type":"__expr__","uid":"${DS_EXPRESSION}"},"expression":"$B / $C","hide":false,"refId":"D","type":"math"}],"title":"Cluster Max JVM CPU Utilization","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":true,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":30,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"reqps"},"overrides":[{"matcher":{"id":"byName","options":"In"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}}]},{"matcher":{"id":"byName","options":"Out"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}}]}]},"gridPos":{"h":12,"w":11,"x":13,"y":12},"id":14,"interval":"60s","options":{"legend":{"calcs":["min","max"],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_topic_request_count_total{job=\"$cluster_id\", type=\"produce\"}[$__rate_interval]))","fullMetaSearch":false,"includeNullMetadata":true,"instant":false,"legendFormat":"In","range":true,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","expr":"sum(rate(kafka_topic_request_count_total{job=\"$cluster_id\", type=\"fetch\"}[$__rate_interval])) * -1","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":false,"legendFormat":"Out","range":true,"refId":"B","useBackend":false}],"title":"QPS In (+) / Out (-)","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Value #A"},"properties":[{"id":"displayName","value":"Commit Offset"},{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"Value #B"},"properties":[{"id":"displayName","value":"Log End Offset"},{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"consumer_group"},"properties":[{"id":"displayName","value":"Consumer Group"},{"id":"links","value":[{"targetBlank":true,"title":"Show Group Metrics","url":"/d/d90be32f-7d32-488a-b99c-3e21529790e4/group-metrics?var-datasource=${datasource}&var-cluster_id=${cluster_id}&var-group_id=${__value.text}&var-topic=${__data.fields.topic}"}]},{"id":"custom.filterable","value":true}]}]},"gridPos":{"h":13,"w":7,"x":0,"y":24},"id":12,"options":{"cellHeight":"sm","footer":{"countRows":false,"enablePagination":true,"fields":"","reducer":["sum"],"show":false},"frameIndex":1,"showHeader":true,"sortBy":[{"desc":true,"displayName":"Consumer Lag"}]},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(consumer_group, topic) (max by(consumer_group, topic, partition) (kafka_group_commit_offset{job=\"$cluster_id\"}))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"{{consumer_group}}-{{topic}}-{{partition}}","range":false,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(topic) (max by(topic, partition) (kafka_log_end_offset{job=\"$cluster_id\"}))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"{{topic}}-{{partition}}","range":false,"refId":"B","useBackend":false}],"title":"Group Statistics","transformations":[{"id":"merge","options":{}},{"id":"calculateField","options":{"alias":"Consumer Lag","binary":{"left":"Value #B","operator":"-","right":"Value #A"},"mode":"binary","reduce":{"reducer":"sum"},"replaceFields":false}},{"id":"filterByValue","options":{"filters":[{"config":{"id":"isNotNull","options":{}},"fieldName":"consumer_group"}],"match":"any","type":"include"}},{"id":"organize","options":{"excludeByName":{"Time":true,"Value #A":true,"Value #B":true},"indexByName":{"Consumer Lag":5,"Time":1,"Value #A":3,"Value #B":4,"consumer_group":0,"topic":2},"renameByName":{}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","cellOptions":{"type":"auto"},"inspect":true},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"topic"},"properties":[{"id":"displayName","value":"Topic"},{"id":"custom.filterable","value":true},{"id":"links","value":[{"targetBlank":true,"title":"","url":"/d/b908cc7a-3592-405d-aafb-fc9225219b0a/topic-metrics?orgId=1&var-datasource=${datasource}&var-cluster_id=${cluster_id}&var-topic=${__value.text}&from=now-1h&to=now"}]}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"Value #A"},"properties":[{"id":"displayName","value":"Bytes In"},{"id":"unit","value":"binBps"}]},{"matcher":{"id":"byName","options":"Value #B"},"properties":[{"id":"displayName","value":"Bytes Out"},{"id":"unit","value":"binBps"}]},{"matcher":{"id":"byName","options":"Value #C"},"properties":[{"id":"displayName","value":"Msgs In"},{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Value #D"},"properties":[{"id":"displayName","value":"Size"},{"id":"unit","value":"bytes"}]}]},"gridPos":{"h":13,"w":17,"x":7,"y":24},"id":9,"options":{"cellHeight":"sm","footer":{"countRows":false,"enablePagination":true,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[{"desc":true,"displayName":"Bytes In"}]},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(topic) (max by(topic, partition) (rate(kafka_network_io_bytes_total{job=\"$cluster_id\", direction=\"in\"}[$__rate_interval] offset 2m)))","format":"table","fullMetaSearch":false,"includeNullMetadata":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(topic) (max by(topic, partition) (rate(kafka_network_io_bytes_total{job=\"$cluster_id\", direction=\"out\"}[$__rate_interval] offset 2m)))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"B","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(topic) (rate(kafka_message_count_total{job=\"$cluster_id\", direction=\"in\"}[$__rate_interval]))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"C","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(topic) (kafka_log_size{job=\"$cluster_id\"})","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"D","useBackend":false}],"title":"Topic Statistics","transformations":[{"id":"merge","options":{}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"Time":0,"Value #A":2,"Value #B":3,"Value #C":4,"Value #D":5,"topic":1},"renameByName":{"Value #A":"","Value #B":"","Value #C":"","topic":""}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"center","cellOptions":{"type":"auto"},"filterable":false,"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"Value #A"},"properties":[{"id":"displayName","value":"Partitions"}]},{"matcher":{"id":"byName","options":"Value #B"},"properties":[{"id":"displayName","value":"Connections"}]},{"matcher":{"id":"byName","options":"instance"},"properties":[{"id":"displayName","value":"node id"},{"id":"links","value":[{"targetBlank":true,"title":"","url":"/d/e97dc219-c0c7-4bbe-9616-cdafb3451a3b/broker-metrics?var-cluster_id=$cluster_id&var-node_id=${__value.text}&var-datasource=${datasource}&var-node_type=All"}]},{"id":"custom.filterable","value":true}]},{"matcher":{"id":"byName","options":"Time"},"properties":[{"id":"custom.hidden","value":true}]},{"matcher":{"id":"byName","options":"Value #C"},"properties":[{"id":"displayName","value":"Bytes In"},{"id":"unit","value":"binBps"}]},{"matcher":{"id":"byName","options":"Value #D"},"properties":[{"id":"displayName","value":"Bytes Out"},{"id":"unit","value":"binBps"}]},{"matcher":{"id":"byName","options":"Value #E"},"properties":[{"id":"displayName","value":"Msgs In"},{"id":"unit","value":"mps"}]},{"matcher":{"id":"byName","options":"Value #F"},"properties":[{"id":"displayName","value":"Produce"},{"id":"unit","value":"reqps"}]},{"matcher":{"id":"byName","options":"Value #G"},"properties":[{"id":"displayName","value":"Fetch"},{"id":"unit","value":"reqps"}]},{"matcher":{"id":"byName","options":"Value #H"},"properties":[{"id":"displayName","value":"Produce P99"},{"id":"unit","value":"ms"}]},{"matcher":{"id":"byName","options":"Value #I"},"properties":[{"id":"displayName","value":"Fetch P99"},{"id":"unit","value":"ms"}]},{"matcher":{"id":"byName","options":"Value #J"},"properties":[{"id":"unit","value":"reqps"},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":0}]}}]},{"matcher":{"id":"byName","options":"Value #K"},"properties":[{"id":"unit","value":"reqps"},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":0}]}}]},{"matcher":{"id":"byName","options":"Value #L"},"properties":[{"id":"unit","value":"reqps"}]}]},"gridPos":{"h":15,"w":24,"x":0,"y":37},"id":8,"options":{"cellHeight":"sm","footer":{"countRows":false,"enablePagination":true,"fields":"","reducer":["sum"],"show":false},"frameIndex":1,"showHeader":true,"sortBy":[{"desc":true,"displayName":"Bytes In"}]},"pluginVersion":"11.2.0","targets":[{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (kafka_partition_count{job=\"$cluster_id\"})","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"A","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (kafka_server_connection_count{job=\"$cluster_id\"})","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"B","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(instance) (rate(kafka_broker_network_io_bytes_total{job=\"$cluster_id\", direction=\"in\"}[$__rate_interval] offset 2m))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"C","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(instance) (rate(kafka_broker_network_io_bytes_total{job=\"$cluster_id\", direction=\"out\"}[$__rate_interval] offset 2m))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"D","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(instance) (rate(kafka_message_count_total{job=\"$cluster_id\", direction=\"in\"}[$__rate_interval] offset 2m))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"E","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(instance) (rate(kafka_request_count_total{job=\"$cluster_id\", type=\"Produce\"}[$__rate_interval] offset 2m))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"F","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"code","exemplar":false,"expr":"sum by(instance) (rate(kafka_request_count_total{job=\"$cluster_id\", type=\"Fetch\"}[$__rate_interval] offset 2m))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"G","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (kafka_request_time_99p_milliseconds{job=\"$cluster_id\", type=\"Produce\"})","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"H","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (kafka_request_time_99p_milliseconds{job=\"$cluster_id\", type=\"Fetch\"})","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"I","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (rate(kafka_topic_request_failed_total{job=\"$cluster_id\", type=\"produce\"}[$__rate_interval]))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"J","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (rate(kafka_topic_request_failed_total{job=\"$cluster_id\", type=\"fetch\"}[$__rate_interval]))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"K","useBackend":false},{"datasource":{"type":"prometheus","uid":"prometheus"},"disableTextWrap":false,"editorMode":"builder","exemplar":false,"expr":"sum by(instance) (rate(kafka_request_error_count_total{job=\"$cluster_id\", error!=\"NONE\"}[$__rate_interval]))","format":"table","fullMetaSearch":false,"hide":false,"includeNullMetadata":true,"instant":true,"legendFormat":"","range":false,"refId":"L","useBackend":false}],"title":"Broker Statistics","transformations":[{"id":"merge","options":{}},{"id":"organize","options":{"excludeByName":{"Time":true},"indexByName":{"Time":0,"Value #A":2,"Value #B":3,"Value #C":5,"Value #D":6,"Value #E":7,"Value #F":8,"Value #G":9,"Value #H":10,"Value #I":11,"Value #J":12,"Value #K":13,"Value #L":4,"instance":1},"renameByName":{"Value #J":"Failed Produce","Value #K":"Failed Fetch","Value #L":"Error Request"}}}],"type":"table"}],"refresh":"30s","schemaVersion":39,"tags":[],"templating":{"list":[{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_broker_active_count{instance_id=~\"$cmp_instance_id\", env_id=~\"$cmp_env_id\"},job)","description":"The cluster id of a Kafka cluster","includeAll":false,"label":"cluster_id","name":"cluster_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_broker_active_count{instance_id=~\"$cmp_instance_id\", env_id=~\"$cmp_env_id\"},job)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"","type":"query"},{"current":{},"includeAll":false,"label":"Data Source","name":"datasource","options":[],"query":"prometheus","refresh":1,"regex":"","type":"datasource"},{"current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"query_result(kafka_controller_active_count{job=\"$cluster_id\"} > 0)","includeAll":false,"label":"Active Controller","name":"active_controller","options":[],"query":{"qryType":3,"query":"query_result(kafka_controller_active_count{job=\"$cluster_id\"} > 0)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"/instance=\"(?<text>[^\"]+)/g","type":"query"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_broker_active_count,env_id)","includeAll":true,"label":"CMP Env Id","name":"cmp_env_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_broker_active_count,env_id)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_node_info{job=~\"$cluster_id\", instance=\"$active_controller\"},version)","includeAll":false,"label":"Version","name":"version","options":[],"query":{"qryType":1,"query":"label_values(kafka_node_info{job=~\"$cluster_id\", instance=\"$active_controller\"},version)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":2,"regex":"","sort":1,"type":"query"},{"allValue":".*","current":{},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(kafka_broker_active_count{env_id=~\"$cmp_env_id\"},instance_id)","includeAll":true,"label":"CMP Instance Id","name":"cmp_instance_id","options":[],"query":{"qryType":1,"query":"label_values(kafka_broker_active_count{env_id=~\"$cmp_env_id\"},instance_id)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"}]},"time":{"from":"now-30m","to":"now"},"timepicker":{},"timezone":"","title":"Cluster Overview","uid":"f719833b-0a35-4fb3-9b84-3815726006e7","version":12,"weekStart":""}